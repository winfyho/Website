# vue 企业级的解决方案

1. vue-router
2. vuex

## vue-router

vue路由，可以简单理解为，当访问某个地址时，渲染某个组件

1. 使用路由

1)  根据一个配置对象创建路由，得到路由对象
2)  在创建vue实例时，讲路由对象配置到实例配置的router中
3)  在合适的位置写上router-view组件，表示路由匹配到的组件渲染的位置，它实际上是vue-router做好的一个组件，并且进行了全局注册


路由配置对象：

1） routes：路由规则配置
2） mode：模式配置
    1. hash模式，兼容性最好，地址出现在#号后，切换地址不会导致页面刷新
    2. history模式，使用的是HTML5 History API，地址直接变化，并且页面不刷新

在配置路由规则时，可以将规则字符串书写为动态路由，动态路由使用冒号+单词

当配置好路由后，除了向所有实例增加```$router```属性之外，还增加了一个属性```$route```，该属性主要用于获取路由信息

```$route.params```：获取的是路由配置规则中匹配到的路由信息，通常称之为路由参数

除了使用params传递信息给页面，还可以使用query的方式，query的方式是在地址栏后面加上？号，然后依次书写数据

1. 导航

通常使用 router-link 来切换页面，它可以自动使用配置中的模式，并且不会刷新页面，本质上，就是生成a元素

router-link会自动给a元素添加样式，当前的地址如果匹配router-link中的to的地址，则会添加样式。

**编程式导航**

当创建Vue实例时，如果配置了router，则配置的router，会出现在所有的vue实例和组件实例中，方式是作为$router属性出现

$router.push("页面地址")：可以跳转页面（向当前页面地址栈中加入一个地址）
$router.replace("页面地址"): 跳转页面（替换当前页面地址栈中当前位置的页面）
$router.go(偏移量): 根据当前地址栈中的位置以及设置的偏移量跳转页面
```$router.goBack()```: 相当于```$router.go(-1)```
```$router.goForward()```: 相当于```$router.go(1)```

3. 导航守卫

导航守卫是一些router的配置函数，不同的函数在不同的时机运行

## vuex

vuex用于解决大量的、复杂的组件间共享数据的问题

通过```new Vuex.Store(配置对象)```创建仓库，通常，一个vue应用，对应一个仓库

配置对象中，可以配置下面的内容：

1. state：仓库的默认状态
2. mutations：配置的是状态有哪些变化，**mutaion是状态变化的唯一原因**
   1. mutaion的参数
      1. state
      2. payload
   2. 不可以直接调用mutaion，必须通过```仓库对象.commit```进行调用
      1. 参数1：mutaion的名称
      2. 参数2：payload
   3. **mutation函数中不可以出现异步等副作用操作**
      1. 没有ajax
      2. 没有dom处理
      3. 没有外部数据处理
      4. 没有当前时间
      5. 没有随机数
3. actions：配置副作用操作
   1. 每个action是一个函数
      1. 参数1：上下文对象，几乎等同于仓库对象
      2. 参数2：payload
   2. 不能直接调用action，必须通过```仓库对象.dispatch```调用
4. modules: 配置模块
   1. 模块中通常都会配置namespaced，以防止命名冲突，除了模块内部，外部在触发action或mutation时，必须添加模块名（命名空间）

vuex + vue：

1. 当配置了vuex后，所有vue实例都会出现一个属性: $store
2. 如果组件需要使用仓库中的数据，需要使用计算属性封装，可以使用Vuex.mapState函数简化操作

